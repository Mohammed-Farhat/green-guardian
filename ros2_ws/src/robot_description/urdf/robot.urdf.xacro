<?xml version="1.0"?>
<robot name="green_guardian" xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- =========================
       Config (shared variables)
       ========================= -->
  <xacro:include filename="$(find robot_description)/urdf/config/dimensions.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/config/materials.xacro"/>

  <!-- =========================
       Components
       ========================= -->
  <xacro:include filename="$(find robot_description)/urdf/components/chassis.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/components/bins.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/components/wheels.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/components/arm_gripper_placeholder.xacro"/>

  <!-- =========================
       Sensors
       ========================= -->
  <xacro:include filename="$(find robot_description)/urdf/sensors/lidar.xacro"/>
  <xacro:include filename="$(find robot_description)/urdf/sensors/depth_camera.xacro"/>

  <!-- =========================
       Base frames (Nav2 friendly)
       ========================= -->
  <link name="base_footprint"/>

  <link name="base_link"/>

  <joint name="base_footprint_to_base_link" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <!-- base_link is above ground by base_link_z -->
    <origin xyz="0 0 ${base_link_z}" rpy="0 0 0"/>
  </joint>

  <!-- =========================
       Assemble robot
       ========================= -->
  <xacro:chassis parent="base_link"/>
  <xacro:bins parent="base_link"/>
  <xacro:wheels parent="base_link"/>

  <!-- placeholder (we will implement later, can stay empty file for now) -->
  <xacro:arm_gripper_placeholder parent="base_link"/>

  <xacro:lidar parent="base_link"/>
  <xacro:depth_camera parent="base_link"/>

</robot>
